<div fxFlexFill fxLayout="column" fxLayoutAlign="start stretch">
	<div fxLayout="row" fxFlex="5" fxLayoutAlign="start center">
		<div fxLayout="column" fxFlex="15">
			<div fxLayout="row" fxFlexFill fxLayoutAlign="start center">
				<button mat-icon-button class="back-button" [routerLink]="['/private']"><mat-icon>arrow_back</mat-icon></button>
				<h1 class="mat-h1 nm">Symbols</h1>
			</div>
		</div>
		<div fxLayout="column" fxFlex fxLayoutAlign="start center">
			<div fxLayout="row" fxFlexFill  fxLayoutAlign="end center">
				<mat-form-field class="mat-input" color="accent" fxFlex="30">
					<mat-label>Search by ISIN, Identifier or Name</mat-label>
					<input matInput type="text" autocomplete="off" [(ngModel)]="searchString">
				</mat-form-field>
				<button mat-icon-button (click)="loadSymbolsPage()">
					<mat-icon>search</mat-icon>
				</button>
			</div>
		</div>
	</div>

	<div fxLayout="row" fxFlex fxLayoutAlign="center center">
		<div fxFlexFill>
			<mat-card class="mat-elevation-z8 symbols-list-card" fxFlex>
				<h3 class="mat-h3">List</h3>
				<mat-divider></mat-divider>
				<mat-card-content class="table-card-content">
					<div class="table-container mat-elevation-z4">
						<table mat-table matSort aria-label="Elements" [dataSource]="dataSource" class="table" matSortDisableClear matSortActive="created_at" matSortDirection="desc" fxFill>
							<!-- ISIN Column -->
							<ng-container matColumnDef="isin">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="isin" [width]="'10%'" [disabled]="dataSource?.getIsLoading() | async">ISIN</th>
								<td mat-cell *matCellDef="let row">{{ row.isin }}</td>
							</ng-container>

							<!-- Identifier Column -->
							<ng-container matColumnDef="identifier">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="identifier" [width]="'5%'" [disabled]="dataSource?.getIsLoading() | async">
									Identifier
								</th>
								<td mat-cell *matCellDef="let row"><a href="#" [routerLink]="['/private/symbol', row.uuid, 'details']" mat-button>{{ row.identifier }} </a></td>
							</ng-container>

							<!-- Name Column -->
							<ng-container matColumnDef="name">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="name" [width]="'25%'" [disabled]="dataSource?.getIsLoading() | async">Name</th>
								<td mat-cell *matCellDef="let row">{{ row.name }}</td>
							</ng-container>

							<!-- Currency Column -->
							<ng-container matColumnDef="currency_code">
								<th mat-header-cell *matHeaderCellDef [width]="'5%'">Currency</th>
								<td mat-cell *matCellDef="let row">{{ row.currencyCode }}</td>
							</ng-container>

							<!-- Minimum Order Quantity Column -->
							<ng-container matColumnDef="minimum_order_quantity">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="minimum_order_quantity" [width]="'10%'" [disabled]="dataSource?.getIsLoading() | async">
									Minimum Order Quantity
								</th>
								<td mat-cell *matCellDef="let row">
									{{ row.minimumOrderQuantity }}
								</td>
							</ng-container>

							<!-- Market Name Column -->
							<ng-container matColumnDef="market_name">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="market_name" [width]="'15%'" [disabled]="dataSource?.getIsLoading() | async">
									Market Name
								</th>
								<td mat-cell *matCellDef="let row">{{ row.marketName }}</td>
							</ng-container>

							<!-- Market Hours (GMT) Column -->
							<ng-container matColumnDef="market_hours_gmt">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="market_hours_gmt" [width]="'10%'" [disabled]="dataSource?.getIsLoading() | async">
									Market Hours (GMT)
								</th>
								<td mat-cell *matCellDef="let row">{{ row.marketHoursGmt }}</td>
							</ng-container>

							<!-- Created At Column -->
							<ng-container matColumnDef="created_at">
								<th mat-header-cell *matHeaderCellDef mat-sort-header="created_at" [disabled]="dataSource?.getIsLoading() | async" >
									Created At
								</th>
								<td mat-cell *matCellDef="let row">{{ row.createdAt | date }}</td>
							</ng-container>

							<tr mat-header-row *matHeaderRowDef="displayedColumns;" ></tr>
							<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
						</table>

						<div class="spinner-container" *ngIf="dataSource.getIsLoading() | async">
							<mat-spinner></mat-spinner>
						</div>

					</div>
				</mat-card-content>
				<mat-card-footer>
					<mat-paginator
						#paginator
						[disabled]="dataSource?.getIsLoading() | async"
						[length]="dataSource?.getTotalItems() | async"
						[pageIndex]="0"
						[pageSize]="50"
						[pageSizeOptions]="[25, 50, 100, 250]"
					>
					</mat-paginator>
				</mat-card-footer>
			</mat-card>
		</div>
	</div>
</div>
